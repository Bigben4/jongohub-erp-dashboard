<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="salepage.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <title>Customer Sale</title>
</head>
<body>
    <nav class="navbar">
        <div class="nav-1">
            <span class="fa-stack fa-lg"><button class="menu-btn"> <i class="fas fa-bars fa-stack-1x fa-inverse"></i></button></span>
            <img src="logo.png" alt="Logo" />
        </div>
        <div class="nav-2">
            <input type="text" placeholder="search">
            <span class="fa-icon"><i class="fas fa-plus"></i></span>
        </div>
        <div class="nav-3">
            <div class="settings">
                <i class="fa fa-gear"></i>
                <h1>Settings</h1>
            </div>
            <div class="icons">
                <i class="fas fa-share-alt"></i>
                <i class="fa fa-clipboard-check"></i>
                <i class="fa fa-clock"></i>
                <i class="fa fa-bell"></i>
            </div>
        </div>
    </nav>
    <div class="main-section">
        <aside class="sidemenu">
            <div class="user">
                <div class="user-icon"><i class="fa fa-user"></i></div>
                <div class="user-info">
                    <h1>Tumbu john</h1>
                    <p>tunbujohn@jongohub.com</p>
                </div>
            </div>
            <div class="dashboard"><i class="fa fa-photo-film"></i><a href="index.html">Dashboard</a></div>
            <div class="customer"><i class="fa fa-user-alt"></i><a href="customerdata.html">Customer</a></div>
            <div class="customer customer-1"><div><i class="fa fa-bolt"></i><a href="salepage.html">Sale</a></div> <i class="fa fa-arrow-left"></i></div>
            <div class="customer"><i class="fa fa-book-bookmark"></i>Subscriptions</div>
            <div class="customer"><i class="fa fa-file-alt"></i><a href="Expense.html">Expense</a></div>
            <div class="customer"><i class="fa fa-pagelines"></i>Contract</div>
            <div class="customer"><i class="fa fa-project-diagram"></i>Projects</div>
            <div class="customer"><i class="fa fa-clock-four"></i>Task</div>
            <div class="customer"><i class="fa fa-user-clock"></i>Support</div>
            <div class="customer"><i class="fa fa-truck-moving"></i>Lead</div>
            <div class="customer"><i class="fa fa-file-archive"></i>Estimate Request</div>
            <div class="customer"><i class="fa fa-circle-question"></i>Knowledge base</div>
            <div class="customer customer-1"><div><i class="fa fa-circle-dot"></i>Utility</div> <i class="fa fa-arrow-left"></i></div>
            <div class="customer customer-1"><div><i class="fa fa-chart-area"></i>Report</div> <i class="fa fa-arrow-left"></i></div>
            <div class="customer"><i class="fa fa-gear"></i>Setup</div>
        </aside>
        <main class="mainpage">
            <h2 class="customer-title">Expenses Sheet</h2>
            <div class="customer-actions">
                <button id="addSaleBtn" class="add-btn">New Expense</button>
            </div>
            <div>
                <table id="customer-table" class="customer-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Category</th>
                            <th>Description</th>
                            <th>Amount</th>
                            <th>Payment method</th>
                            <th>Receipt</th>
                            <th>Vendor</th>
                            <th>Invoice Number</th>
                            <th>Project</th>
                            <th>Employee</th>
                            <th>Payment status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Example row, replace with dynamic data -->
                        <tr>
                            <td>12/2/2025</td>
                            <td>Computer</td>
                            <td>big dell laptop</td>
                            <td>130,000frs</td>
                            <td>MOMO</td>
                            <td>1003429503</td>
                            <td>ja & shela shop</td>
                            <td>124iy383s</td>
                            <td>heart attack</td>
                            <td>Mr Ben</td>
                            <td>Paid</td>
                            <td class="action-cell">
                                <button class="delete-btn">Delete</button>
                                <buton class="edit-btn">Edit</buton>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Modal for adding customer -->
            <div id="customerModal" class="modal">
                <div class="modal-content">
                    <span class="close-btn">&times;</span>
                    <h3>Add New Customer</h3>
                    <form id="customerForm">
                        <input type="date" id="name" name="name" placeholder="Custmer Name" required>
                        <input type="number" id="ProductID" name="ProductID" placeholder="Product ID" required>
                        <input type="text" id="Product" name="product" placeholder="Product Name" required>
                        <input type="text" id="discription" name="discription" placeholder="Product discription" required>
                        <input type="text" id="productcategory" name="productcategory" placeholder="product category" required>
                        <input type="text" id="Price" name="Price" placeholder="Price" required>
                        <input type="text" id="Quantity" name="Quantity" placeholder="Quantity" required>
                        <input type="text" id="SaleStatus" name="SaleStatus" placeholder="Sale-Status" required>
                        <input type="text" id="Contact" name="Contact" placeholder="Contact" required>
                        <input type="text" id="PaymentMethods" name="PaymentMethods" placeholder="Payment-Methods" required>
                        <input type="text"  id="PaymentStatus"  name="Payment-Status" placeholder="Payment-Status" required>
                        <button type="submit" class="add-btn">Add sale</button>
                    </form>
                </div>
            </div>
        </main>
    </div>
  
    <script>

   const addBtn = document.getElementById('addSaleBtn');
const modal = document.getElementById('customerModal');
const closeBtn = document.querySelector('.close-btn');
const form = document.getElementById('customerForm');
const table = document.getElementById('customer-table').getElementsByTagName('tbody')[0];

let editingRow = null; // Track which row is being edited

addBtn.onclick = () => {
    editingRow = null;
    form.reset();
    modal.style.display = 'block';
};

closeBtn.onclick = () => { modal.style.display = 'none'; };
window.onclick = (event) => { if (event.target == modal) modal.style.display = 'none'; };

document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') modal.style.display = 'none';
});

form.onsubmit = function(e) {
    e.preventDefault();

    const name = form.name.value.trim();
    const ProductID = form.ProductID.value.trim();
    const product = form.product.value.trim();
    const discription = form.discription.value.trim();
    const productcategory = form.productcategory.value.trim();
    const Price = form.Price.value.trim();
    const Quantity = form.Quantity.value.trim();
    const SaleStatus = form.SaleStatus.value.trim();
    const Contact = form.Contact.value.trim();
    const PaymentMethods = form.PaymentMethods.value.trim();
    const PaymentStatus = form.PaymentStatus.value.trim();

    if (!name || !ProductID || !product || !discription || !productcategory || !Price || !Quantity || !SaleStatus || !Contact || !PaymentMethods || !PaymentStatus) {
        alert("Please fill out all fields.");
        return;
    }

    if (isNaN(Price) || isNaN(Quantity)) {
        alert("Price and Quantity must be numeric.");
        return;
    }

    if (editingRow) {
        // Update existing row
        editingRow.cells[0].textContent = name;
        editingRow.cells[1].textContent = ProductID;
        editingRow.cells[2].textContent = product;
        editingRow.cells[3].textContent = discription;
        editingRow.cells[4].textContent = productcategory;
        editingRow.cells[5].textContent = Price;
        editingRow.cells[6].textContent = Quantity;
        editingRow.cells[7].textContent = SaleStatus;
        editingRow.cells[8].textContent = Contact;
        editingRow.cells[9].textContent = PaymentMethods;
        editingRow.cells[10].textContent = PaymentStatus;
        editingRow = null;
    } else {
        // Create new row
        const row = table.insertRow();
        row.insertCell(0).textContent = name;
        row.insertCell(1).textContent = ProductID;
        row.insertCell(2).textContent = product;
        row.insertCell(3).textContent = discription;
        row.insertCell(4).textContent = productcategory;
        row.insertCell(5).textContent = Price;
        row.insertCell(6).textContent = Quantity;
        row.insertCell(7).textContent = SaleStatus;
        row.insertCell(8).textContent = Contact;
        row.insertCell(9).textContent = PaymentMethods;
        row.insertCell(10).textContent = PaymentStatus;

        const actionCell = row.insertCell(11);
        actionCell.className = 'action-cell';

        const editBtn = document.createElement('button');
        editBtn.className = 'edit-btn';
        editBtn.textContent = 'Edit';

        const delBtn = document.createElement('button');
        delBtn.className = 'delete-btn';
        delBtn.textContent = 'Delete';

        actionCell.appendChild(editBtn);
        actionCell.appendChild(delBtn);
    }

    modal.style.display = 'none';
    form.reset();
};

// Handle Delete and Edit
document.addEventListener('click', function(e) {
    const target = e.target;
    const row = target.closest('tr');

    if (target.classList.contains('delete-btn')) {
        if (row) row.remove();
    }

    if (target.classList.contains('edit-btn')) {
        editingRow = row;
        form.name.value = row.cells[0].textContent;
        form.ProductID.value = row.cells[1].textContent;
        form.product.value = row.cells[2].textContent;
        form.discription.value = row.cells[3].textContent;
        form.productcategory.value = row.cells[4].textContent;
        form.Price.value = row.cells[5].textContent;
        form.Quantity.value = row.cells[6].textContent;
        form.SaleStatus.value = row.cells[7].textContent;
        form.Contact.value = row.cells[8].textContent;
        form.PaymentMethods.value = row.cells[9].textContent;
        form.PaymentStatus.value = row.cells[10].textContent;
        modal.style.display = 'block';
    }
});


    </script>
</body>
</html>